const questionsType = [
    {
        title: 'Gender',
        key: 'gender',
        questions: ['Man', 'Woman']
    },
    {
        title: 'Hair Color',
        key: 'hairColor',
        questions: ['Blonde', 'Red', 'Pink', 'Brown', 'White', 'Black']
    },
    {
        title: 'Moustache',
        key: 'moustache',
        questions: ['Yes', 'No']
    },
    {
        title: 'Glasses',
        key: 'glasses',
        questions: ['Yes', 'No']
    },
    {
        title: 'Hat or Cap',
        key: 'hatOrCap',
        questions: ['Yes', 'No']
    },
    {
        title: 'Clothes color',
        key: 'clothesColor',
        questions: ['Red', 'Orange', 'Green', 'White', 'Black', 'Pink']
    },
    {
        title: 'Skin color',
        key: 'skinColor',
        questions: ['Light', 'Dark']
    },
    {
        title: 'Long Hair',
        key: 'longHair',
        questions: ['Yes', 'No']
    }
]

const persons = [
    {
        img: 'images/001-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Red',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/002-man.svg',
        gender: 'Man',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/003-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Green',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/004-man.svg',
        gender: 'Man',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'Yes',
        clothesColor: 'Red',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/005-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'White',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/006-man.svg',
        gender: 'Man',
        hairColor: 'Brown',
        moustache: 'Yes',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Green',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/007-man.svg',
        gender: 'Man',
        hairColor: 'Red',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/008-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'White',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/009-man.svg',
        gender: 'Man',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/010-woman.svg',
        gender: 'Woman',
        hairColor: 'Brown',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Pink',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/011-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/012-woman.svg',
        gender: 'Woman',
        hairColor: 'Red',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/013-woman.svg',
        gender: 'Woman',
        hairColor: 'White',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Pink',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/014-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'White',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/015-woman.svg',
        gender: 'Woman',
        hairColor: 'Brown',
        moustache: 'No',
        glasses: 'Yes',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/016-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'Yes',
        clothesColor: 'Pink',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/017-woman.svg',
        gender: 'Woman',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/018-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'White',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/019-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Red',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/020-man.svg',
        gender: 'Man',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/021-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'Yes',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/022-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'Yes',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/023-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/024-man.svg',
        gender: 'Man',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/025-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Red',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/026-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Red',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/027-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/028-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Pink',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/029-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'White',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/030-woman.svg',
        gender: 'Woman',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Orange',
        skinColor: 'Dark',
        longHair: 'No'
    }, {
        img: 'images/031-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Green',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/032-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'Yes',
        hatOrCap: 'No',
        clothesColor: 'Pink',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/033-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/034-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Pink',
        skinColor: 'Dark',
        longHair: 'Yes'
    }, {
        img: 'images/035-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/036-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'White',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/037-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'Yes',
        clothesColor: 'Red',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/038-man.svg',
        gender: 'Man',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/039-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'Yes',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Green',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/040-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Red',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/041-man.svg',
        gender: 'Man',
        hairColor: 'Blonde',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/042-man.svg',
        gender: 'Man',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Red',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/043-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Black',
        skinColor: 'Light',
        longHair: 'Yes'
    }, {
        img: 'images/044-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'Pink',
        skinColor: 'Light',
        longHair: 'No'
    }, {
        img: 'images/045-woman.svg',
        gender: 'Woman',
        hairColor: 'Black',
        moustache: 'No',
        glasses: 'No',
        hatOrCap: 'No',
        clothesColor: 'White',
        skinColor: 'Light',
        longHair: 'No'
    }
]

//SELECCION DE VARIABLES
boardgame$$ = document.querySelector(".b-board-game");
questions$$ = document.querySelector(".b-questions");
clueCount$$ = document.querySelector('[data-function="clueCount"]');
buttonStartGame$$ = document.querySelector(".startGame");
buttonStartGame$$.addEventListener('click', startGame); 
let randomPerson;

//FUNCTION PARA EMPEZAR EL JUEGO DE 0, CADA VEZ QUE SE PULSE START GAME
function startGame () {
    boardgame$$.innerHTML = "";
    questions$$.innerHTML = "";
    clueCount$$.innerText = 0;

    //ELEGIR ALEATORIAMENTE UN PERSONAJE GANADOR
    k = Math.floor(Math.random()*persons.length);
    randomPerson = persons[k];

    //PRESENTAR LAS IMAGENES DE LOS PERSONAJES EN PANTALLA
    for (const person of persons) {
        boardgame$$.innerHTML += `<img class="personajes" src="${person.img}"></img>`;                        
    } 
    const personajes$$ = document.querySelectorAll(".personajes");

    //SI CLICK EN EL PERSONAJE GANADOR GANAS, SI NO, PIERDES Y SE FINALIZA EL JUEGO
    for (let p = 0; p < personajes$$.length; p++) {
        personajes$$[p].addEventListener('click', () => {
            if (persons[p] == randomPerson) {
                alert("¡Felicidades, has ganado con " + clueCount$$.innerText + " pistas!");
            } else {
                alert("Has fallado, por lo que has perdido :(");
            };
            finalizarJuego();
        })
    }

    //PRESENTAR LAS RESPUESTAS EN BOTONES Y LAS PREGUNTAS EN TITULOS Y SE DA A CADA BOTON EL ACCESSKEY
    for (const type of questionsType) {
        questions$$.innerHTML += `<h2>${type.title}</h2>`;
        for (let i = 0; i < type.questions.length; i++) {
            questions$$.innerHTML += `<button class="questionButton" accessKey="${type.key}">${type.questions[i]}</button>`;
        };
    };

    //SELECCIONAMOS A TODOS LOS BOTONES DE RESPUESTAS Y SI HACEMOS CLICK SE PROCESAN PARA COMPARARLOS CON EL PERSONAJE GANADOR
    const questionButton$$ = document.querySelectorAll(".questionButton");
    for (let i = 0; i < questionButton$$.length; i++) {
        questionButton$$[i].addEventListener('click', () => {
            let pregunta = questionButton$$[i].accessKey;
            let respuesta = questionButton$$[i].innerText;
            procesar(pregunta, respuesta);
            questionButton$$[i].style.pointerEvents = "none";
            questionButton$$[i].style.opacity = "0.2";
        })
    };

    function procesar(pregunta, respuesta) {
        /* console.log("el personaje aleatorio es: " + randomPerson.img);
        console.log("la pregunta es: " + pregunta + " y la respuesta es: " + respuesta);
        console.log("el valor de pregunta en la randomPerson es: " + randomPerson[pregunta]); */
    
        if (respuesta == randomPerson[pregunta]) {
            // SI EL PERSONAJE GANADOR TIENE EL VALOR DEL BOTON EL RESTO DE PERSONAJES QUE NO LO TIENEN SE DESHABILITAN
            for (let j = 0; j < persons.length; j++) { 
                 if (persons[j][pregunta] != respuesta) {
                     personajes$$[j].style.pointerEvents = "none";
                     personajes$$[j].style.opacity = "0.2";
                 };
            };
        } else {
            // SI EL PERSONAJE GANADOR NO TIENE EL VALOR DEL BOTON LOS PERSONAJES CON ESE VALOR SE DESHABILITAN
            for (let j = 0; j < persons.length; j++){
                if (persons[j][pregunta] == respuesta){
                    personajes$$[j].style.pointerEvents = "none";
                    personajes$$[j].style.opacity = "0.2";
                };
            };
        };
        clueCount$$.innerText++;
    }; 

    function finalizarJuego() {
        //DE TODOS LOS PERSONAJES SE DESHABILITAN TODOS, MENOS EL PERONAJE GANADOR QUE NO PIERDE OPACIDAD
        for (let p = 0; p < persons.length; p++) {
            if (randomPerson != persons[p]) {
                personajes$$[p].style.pointerEvents = "none";
                personajes$$[p].style.opacity = "0.2";
            } else {
                personajes$$[p].style.pointerEvents = "none";
            };
        };
        //SE DESHABILITAN TODOS LOS BOTONES
        for (let i = 0; i < questionButton$$.length; i++) {
            questionButton$$[i].style.pointerEvents = "none";
            questionButton$$[i].style.opacity = "0.2";   
        };
    };
};

